--// ðŸ§  "Admin Panel" Remote Spammer by Zynix ðŸ˜ˆ (Fixed Start + Safe tweens + checks)

--// Services
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local SoundService = game:GetService("SoundService")

--// Remote (try to get it safely)
local Event
pcall(function()
	Event = LocalPlayer:WaitForChild("Backpack", 2) and LocalPlayer.Backpack:FindFirstChild("Normal") and LocalPlayer.Backpack.Normal:FindFirstChild("Event")
end)

--// GUI Setup
local ScreenGui = Instance.new("ScreenGui", LocalPlayer:WaitForChild("PlayerGui"))
local Frame = Instance.new("Frame")
local Title = Instance.new("TextLabel")
local UsernameBox = Instance.new("TextBox")
local AmountBox = Instance.new("TextBox")
local Toggle = Instance.new("TextButton")
local Credit = Instance.new("TextButton")

local UICornerFrame = Instance.new("UICorner")
local UICornerButton = Instance.new("UICorner")
local UICornerBox1 = Instance.new("UICorner")
local UICornerBox2 = Instance.new("UICorner")

ScreenGui.Name = "AdminPanel"

Frame.Parent = ScreenGui
Frame.Size = UDim2.new(0, 260, 0, 230)
Frame.Position = UDim2.new(0.5, -130, 0.5, -115)
Frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
UICornerFrame.CornerRadius = UDim.new(0, 12)
UICornerFrame.Parent = Frame

--// Gradient Background
local frameGradient = Instance.new("UIGradient", Frame)
frameGradient.Color = ColorSequence.new({
	ColorSequenceKeypoint.new(0, Color3.fromRGB(30, 30, 60)),
	ColorSequenceKeypoint.new(1, Color3.fromRGB(60, 30, 90))
})
frameGradient.Rotation = 45

--// Title
Title.Parent = Frame
Title.Size = UDim2.new(1, 0, 0, 30)
Title.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
Title.Text = "Admin Panel"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.SourceSansBold
Title.TextSize = 20
Title.BorderSizePixel = 0
Title.ZIndex = 2
Title.TextTransparency = 0 -- visible

--// Username Box
UsernameBox.Parent = Frame
UsernameBox.Size = UDim2.new(1, -20, 0, 40)
UsernameBox.Position = UDim2.new(0, 10, 0, 50)
UsernameBox.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
UsernameBox.TextColor3 = Color3.fromRGB(255, 255, 255)
local USER_PLACEHOLDER = "Target Username Made By (ex:Skye Resul)"
UsernameBox.Text = USER_PLACEHOLDER
UsernameBox.TextTransparency = 0.4
UsernameBox.ClearTextOnFocus = false
UICornerBox1.CornerRadius = UDim.new(0, 8)
UICornerBox1.Parent = UsernameBox
local grad1 = Instance.new("UIGradient", UsernameBox)
grad1.Color = ColorSequence.new({ ColorSequenceKeypoint.new(0, Color3.fromRGB(90,90,140)), ColorSequenceKeypoint.new(1, Color3.fromRGB(120,80,160)) })

--// Amount Box
AmountBox.Parent = Frame
AmountBox.Size = UDim2.new(1, -20, 0, 40)
AmountBox.Position = UDim2.new(0, 10, 0, 100)
AmountBox.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
AmountBox.TextColor3 = Color3.fromRGB(255, 255, 255)
local AMT_PLACEHOLDER = "Amount per tick (ex: 3)"
AmountBox.Text = AMT_PLACEHOLDER
AmountBox.TextTransparency = 0.4
AmountBox.ClearTextOnFocus = false
UICornerBox2.CornerRadius = UDim.new(0, 8)
UICornerBox2.Parent = AmountBox
local grad2 = Instance.new("UIGradient", AmountBox)
grad2.Color = ColorSequence.new({ ColorSequenceKeypoint.new(0, Color3.fromRGB(90,90,140)), ColorSequenceKeypoint.new(1, Color3.fromRGB(120,80,160)) })

--// Placeholder logic
local function setupPlaceholder(box, placeholder)
	box.Focused:Connect(function()
		if box.Text == placeholder then
			box.Text = ""
			box.TextTransparency = 0
		end
	end)
	box.FocusLost:Connect(function()
		if box.Text == "" then
			box.Text = placeholder
			box.TextTransparency = 0.4
		end
	end)
end
setupPlaceholder(UsernameBox, USER_PLACEHOLDER)
setupPlaceholder(AmountBox, AMT_PLACEHOLDER)

--// Toggle Button
Toggle.Parent = Frame
Toggle.Size = UDim2.new(1, -20, 0, 40)
Toggle.Position = UDim2.new(0, 10, 0, 150)
Toggle.Text = "Start"
Toggle.BackgroundColor3 = Color3.fromRGB(60, 100, 255)
Toggle.TextColor3 = Color3.fromRGB(255, 255, 255)
Toggle.Font = Enum.Font.SourceSansBold
Toggle.TextSize = 20
UICornerButton.CornerRadius = UDim.new(0, 8)
UICornerButton.Parent = Toggle
local gradButton = Instance.new("UIGradient", Toggle)
gradButton.Color = ColorSequence.new({ ColorSequenceKeypoint.new(0, Color3.fromRGB(80,120,255)), ColorSequenceKeypoint.new(1, Color3.fromRGB(100,150,255)) })

--// Credit Button
Credit.Parent = Frame
Credit.Size = UDim2.new(1, -20, 0, 25)
Credit.Position = UDim2.new(0, 10, 0, 200)
Credit.Text = "@SkyeMoz"
Credit.TextColor3 = Color3.fromRGB(180, 180, 255)
Credit.Font = Enum.Font.SourceSansSemibold
Credit.TextSize = 16
Credit.BackgroundTransparency = 1

--// Sounds (safe creation)
local function safeCreateSound(id)
	local ok, s = pcall(function()
		local sd = Instance.new("Sound")
		sd.SoundId = id
		sd.Parent = SoundService
		return sd
	end)
	return ok and s or nil
end

local ClickSound = safeCreateSound("rbxassetid://12222142")
local SuccessSound = safeCreateSound("rbxassetid://138097048")
local ErrorSound = safeCreateSound("rbxassetid://138097059")

--// Drag System (PC + Mobile)
local dragging, dragInput, dragStart, startPos
local function update(input)
	local delta = input.Position - dragStart
	Frame.Position = UDim2.new(
		startPos.X.Scale, startPos.X.Offset + delta.X,
		startPos.Y.Scale, startPos.Y.Offset + delta.Y
	)
end

-- Title should accept InputBegan; TextLabel works with InputBegan
Title.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		dragging = true
		dragStart = input.Position
		startPos = Frame.Position
		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then dragging = false end
		end)
	end
end)
Title.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then dragInput = input end
end)
UserInputService.InputChanged:Connect(function(input)
	if input == dragInput and dragging then update(input) end
end)

--// Proper UDim2 scaling helper for tween
local function scaleUDim2(sizeUDim2, scale)
	local xScale = sizeUDim2.X.Scale
	local xOffset = math.floor(sizeUDim2.X.Offset * scale)
	local yScale = sizeUDim2.Y.Scale
	local yOffset = math.floor(sizeUDim2.Y.Offset * scale)
	return UDim2.new(xScale, xOffset, yScale, yOffset)
end

--// Animation Function (fixed â€” no illegal UDim2 math)
local function buttonPressEffect(btn)
	local startSize = btn.Size
	local smallSize = scaleUDim2(startSize, 0.95)
	local tween1 = TweenService:Create(btn, TweenInfo.new(0.08, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Size = smallSize})
	local tween2 = TweenService:Create(btn, TweenInfo.new(0.08, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Size = startSize})
	tween1:Play()
	tween1.Completed:Wait()
	tween2:Play()
end

--// Logic
local active = false

Toggle.MouseButton1Click:Connect(function()
	-- play click safely
	pcall(function() if ClickSound then ClickSound:Play() end end)
	-- do animation (safe pcall so animation errors don't break logic)
	pcall(buttonPressEffect, Toggle)

	-- toggle
	active = not active
	Toggle.Text = active and "Stop" or "Start"
	Toggle.BackgroundColor3 = active and Color3.fromRGB(255, 80, 80) or Color3.fromRGB(60, 100, 255)

	-- ensure Event exists
	if not Event then
		warn("[AdminPanel] Remote 'Event' not found. Can't fire server.")
		pcall(function() if ErrorSound then ErrorSound:Play() end end)
		active = false
		Toggle.Text = "Start"
		Toggle.BackgroundColor3 = Color3.fromRGB(60, 100, 255)
		return
	end

	if active then
		task.spawn(function()
			while active do
				local username = UsernameBox.Text
				local amount = tonumber(AmountBox.Text)

				-- sanitize amount
				if not amount or amount <= 0 then amount = 1 end
				-- treat placeholder as empty
				if username == USER_PLACEHOLDER or username == "" then
					pcall(function() if ErrorSound then ErrorSound:Play() end end)
				else
					local target = workspace:FindFirstChild(username)
					if target then
						for i = 1, amount do
							-- pcall sending in case Event is invalid at runtime
							pcall(function()
								Event:FireServer("slash", target, Vector3.new(2,0,-3))
							end)
						end
						pcall(function() if SuccessSound then SuccessSound:Play() end end)
					else
						pcall(function() if ErrorSound then ErrorSound:Play() end end)
					end
				end

				task.wait(0.3)
			end
		end)
	end
end)

--// Credit Button Click
Credit.MouseButton1Click:Connect(function()
	-- copy the link safely (some executors restrict setclipboard)
	pcall(function()
		if setclipboard then
			setclipboard("https://discord.gg/hJDraXq5ks")
		end
	end)
	pcall(buttonPressEffect, Credit)
	pcall(function() if SuccessSound then SuccessSound:Play() end end)
end)
